<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>国际跳棋AI | Letian</title><meta name="description" content="C语言实现一个有一定棋力的国际跳棋AI"><meta name="keywords" content="game,algorithm,c/c++"><meta name="author" content="Letian"><meta name="copyright" content="Letian"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="国际跳棋AI"><meta name="twitter:description" content="C语言实现一个有一定棋力的国际跳棋AI"><meta name="twitter:image" content="https://pic.downk.cc/item/5e3192e92fb38b8c3ce91b19.jpg"><meta property="og:type" content="article"><meta property="og:title" content="国际跳棋AI"><meta property="og:url" content="https://li-letian.github.io/guojitiaoqiai/"><meta property="og:site_name" content="Letian"><meta property="og:description" content="C语言实现一个有一定棋力的国际跳棋AI"><meta property="og:image" content="https://pic.downk.cc/item/5e3192e92fb38b8c3ce91b19.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="https://li-letian.github.io/guojitiaoqiai/"><link rel="next" title="用Vscode+Cmder写代码" href="https://li-letian.github.io/vscodecmdershengchanlipeizhi/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://letian.website","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: {"text":"(°ー°〃),(＃°Д°),(。□。),(ノ_<),( ^ω^),(≧ω≦ ),( ΘωΘ),(●′ω`●),(๑￫ܫ￩),(oﾟωﾟo),Σ(°△°)︴,╮(╯▽╰)╭","fontSize":"15px"},
  medium_zoom: false,
  fancybox: true,
  Snackbar: {"bookmark":{"title":"Snackbar.bookmark.title","message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-center"},
  baiduPush: true,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="\assets\css\APlayer.min.css" class="aplayer-style-marker">
<script src="\assets\js\APlayer.min.js" class="aplayer-script-marker"></script>
<script src="\assets\js\Meting.min.js" class="meting-script-marker"></script>
</head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Letian</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于俺</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 大佬们</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 别学了</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 听听音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 康康电影</span></a></li></ul></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">3</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">5</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">3</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于俺</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 大佬们</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 别学了</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 听听音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 康康电影</span></a></li></ul></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录索引</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#成绩"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">成绩</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#游戏规则与平台说明"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">游戏规则与平台说明</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#项目简介"><span class="toc_mobile_items-number">2.1.</span> <span class="toc_mobile_items-text">项目简介</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#对抗规则"><span class="toc_mobile_items-number">2.2.</span> <span class="toc_mobile_items-text">对抗规则</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#比赛规则"><span class="toc_mobile_items-number">2.3.</span> <span class="toc_mobile_items-text">比赛规则</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#排名和评分规则"><span class="toc_mobile_items-number">2.4.</span> <span class="toc_mobile_items-text">排名和评分规则</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#输入输出格式"><span class="toc_mobile_items-number">2.5.</span> <span class="toc_mobile_items-text">输入输出格式</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#START-FIELD"><span class="toc_mobile_items-number">2.5.1.</span> <span class="toc_mobile_items-text">START [FIELD]</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#示例"><span class="toc_mobile_items-number">2.5.1.1.</span> <span class="toc_mobile_items-text">示例</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#PLACE-N-X1-Y1-X2-Y2-…-XN-YN"><span class="toc_mobile_items-number">2.5.2.</span> <span class="toc_mobile_items-text">PLACE N [X1,Y1] [X2,Y2] … [XN,YN]</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#示例-v2"><span class="toc_mobile_items-number">2.5.2.1.</span> <span class="toc_mobile_items-text">示例</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#TURN"><span class="toc_mobile_items-number">2.5.3.</span> <span class="toc_mobile_items-text">TURN</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#示例-v3"><span class="toc_mobile_items-number">2.5.3.1.</span> <span class="toc_mobile_items-text">示例</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#END-FIELD"><span class="toc_mobile_items-number">2.5.4.</span> <span class="toc_mobile_items-text">END [FIELD]</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#示例-v4"><span class="toc_mobile_items-number">2.5.4.1.</span> <span class="toc_mobile_items-text">示例</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#调试指令"><span class="toc_mobile_items-number">2.6.</span> <span class="toc_mobile_items-text">调试指令</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#示例-v5"><span class="toc_mobile_items-number">2.6.1.</span> <span class="toc_mobile_items-text">示例</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#直接终止判负的情况"><span class="toc_mobile_items-number">2.7.</span> <span class="toc_mobile_items-text">直接终止判负的情况</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#在不允许响应的情况下响应"><span class="toc_mobile_items-number">2.7.1.</span> <span class="toc_mobile_items-text">在不允许响应的情况下响应</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#响应内容格式不正确或无效走子"><span class="toc_mobile_items-number">2.7.2.</span> <span class="toc_mobile_items-text">响应内容格式不正确或无效走子</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#超出时间限制或空间限制"><span class="toc_mobile_items-number">2.7.3.</span> <span class="toc_mobile_items-text">超出时间限制或空间限制</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#程序自身崩溃"><span class="toc_mobile_items-number">2.7.4.</span> <span class="toc_mobile_items-text">程序自身崩溃</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#编程注意事项"><span class="toc_mobile_items-number">2.8.</span> <span class="toc_mobile_items-text">编程注意事项</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#在线评测平台操作说明"><span class="toc_mobile_items-number">2.9.</span> <span class="toc_mobile_items-text">在线评测平台操作说明</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#评测环境"><span class="toc_mobile_items-number">2.10.</span> <span class="toc_mobile_items-text">评测环境</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#参考资料"><span class="toc_mobile_items-number">2.11.</span> <span class="toc_mobile_items-text">参考资料</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#思路"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">思路</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#储存与着法"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">储存与着法</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#0x88判别数组"><span class="toc_mobile_items-number">4.1.</span> <span class="toc_mobile_items-text">0x88判别数组</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#编号规则"><span class="toc_mobile_items-number">4.1.1.</span> <span class="toc_mobile_items-text">编号规则</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#证明"><span class="toc_mobile_items-number">4.1.2.</span> <span class="toc_mobile_items-text">证明</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#位棋盘"><span class="toc_mobile_items-number">4.2.</span> <span class="toc_mobile_items-text">位棋盘</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#强化版本"><span class="toc_mobile_items-number">4.3.</span> <span class="toc_mobile_items-text">强化版本</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#搜索"><span class="toc_mobile_items-number">5.</span> <span class="toc_mobile_items-text">搜索</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#估值"><span class="toc_mobile_items-number">5.1.</span> <span class="toc_mobile_items-text">估值</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#AlphaBeta剪枝"><span class="toc_mobile_items-number">5.2.</span> <span class="toc_mobile_items-text">AlphaBeta剪枝</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#着法排序"><span class="toc_mobile_items-number">5.3.</span> <span class="toc_mobile_items-text">着法排序</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#置换表和主要变例"><span class="toc_mobile_items-number">5.4.</span> <span class="toc_mobile_items-text">置换表和主要变例</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#迭代加深"><span class="toc_mobile_items-number">5.5.</span> <span class="toc_mobile_items-text">迭代加深</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Pvs"><span class="toc_mobile_items-number">5.6.</span> <span class="toc_mobile_items-text">Pvs</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#未实现的想法"><span class="toc_mobile_items-number">6.</span> <span class="toc_mobile_items-text">未实现的想法</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#蒙特卡洛模拟"><span class="toc_mobile_items-number">6.1.</span> <span class="toc_mobile_items-text">蒙特卡洛模拟</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#更好的估值参数"><span class="toc_mobile_items-number">6.2.</span> <span class="toc_mobile_items-text">更好的估值参数</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#CNN自动调参"><span class="toc_mobile_items-number">6.3.</span> <span class="toc_mobile_items-text">CNN自动调参</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#MTDF期望窗口搜索"><span class="toc_mobile_items-number">6.4.</span> <span class="toc_mobile_items-text">MTDF期望窗口搜索</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#自动横跳的更有效解决方案"><span class="toc_mobile_items-number">6.5.</span> <span class="toc_mobile_items-text">自动横跳的更有效解决方案</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Debug"><span class="toc_mobile_items-number">7.</span> <span class="toc_mobile_items-text">Debug</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#心路历程"><span class="toc_mobile_items-number">8.</span> <span class="toc_mobile_items-text">心路历程</span></a></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="color"></div><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录索引</div><div class="sidebar-toc__progress"><span class="progress-notice">您已经阅读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#成绩"><span class="toc-number">1.</span> <span class="toc-text">成绩</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#游戏规则与平台说明"><span class="toc-number">2.</span> <span class="toc-text">游戏规则与平台说明</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#项目简介"><span class="toc-number">2.1.</span> <span class="toc-text">项目简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#对抗规则"><span class="toc-number">2.2.</span> <span class="toc-text">对抗规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#比赛规则"><span class="toc-number">2.3.</span> <span class="toc-text">比赛规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#排名和评分规则"><span class="toc-number">2.4.</span> <span class="toc-text">排名和评分规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#输入输出格式"><span class="toc-number">2.5.</span> <span class="toc-text">输入输出格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#START-FIELD"><span class="toc-number">2.5.1.</span> <span class="toc-text">START [FIELD]</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#示例"><span class="toc-number">2.5.1.1.</span> <span class="toc-text">示例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PLACE-N-X1-Y1-X2-Y2-…-XN-YN"><span class="toc-number">2.5.2.</span> <span class="toc-text">PLACE N [X1,Y1] [X2,Y2] … [XN,YN]</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#示例-v2"><span class="toc-number">2.5.2.1.</span> <span class="toc-text">示例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TURN"><span class="toc-number">2.5.3.</span> <span class="toc-text">TURN</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#示例-v3"><span class="toc-number">2.5.3.1.</span> <span class="toc-text">示例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#END-FIELD"><span class="toc-number">2.5.4.</span> <span class="toc-text">END [FIELD]</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#示例-v4"><span class="toc-number">2.5.4.1.</span> <span class="toc-text">示例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#调试指令"><span class="toc-number">2.6.</span> <span class="toc-text">调试指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#示例-v5"><span class="toc-number">2.6.1.</span> <span class="toc-text">示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#直接终止判负的情况"><span class="toc-number">2.7.</span> <span class="toc-text">直接终止判负的情况</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#在不允许响应的情况下响应"><span class="toc-number">2.7.1.</span> <span class="toc-text">在不允许响应的情况下响应</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#响应内容格式不正确或无效走子"><span class="toc-number">2.7.2.</span> <span class="toc-text">响应内容格式不正确或无效走子</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#超出时间限制或空间限制"><span class="toc-number">2.7.3.</span> <span class="toc-text">超出时间限制或空间限制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#程序自身崩溃"><span class="toc-number">2.7.4.</span> <span class="toc-text">程序自身崩溃</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编程注意事项"><span class="toc-number">2.8.</span> <span class="toc-text">编程注意事项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在线评测平台操作说明"><span class="toc-number">2.9.</span> <span class="toc-text">在线评测平台操作说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#评测环境"><span class="toc-number">2.10.</span> <span class="toc-text">评测环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#参考资料"><span class="toc-number">2.11.</span> <span class="toc-text">参考资料</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#思路"><span class="toc-number">3.</span> <span class="toc-text">思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#储存与着法"><span class="toc-number">4.</span> <span class="toc-text">储存与着法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#0x88判别数组"><span class="toc-number">4.1.</span> <span class="toc-text">0x88判别数组</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#编号规则"><span class="toc-number">4.1.1.</span> <span class="toc-text">编号规则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#证明"><span class="toc-number">4.1.2.</span> <span class="toc-text">证明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#位棋盘"><span class="toc-number">4.2.</span> <span class="toc-text">位棋盘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#强化版本"><span class="toc-number">4.3.</span> <span class="toc-text">强化版本</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#搜索"><span class="toc-number">5.</span> <span class="toc-text">搜索</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#估值"><span class="toc-number">5.1.</span> <span class="toc-text">估值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AlphaBeta剪枝"><span class="toc-number">5.2.</span> <span class="toc-text">AlphaBeta剪枝</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#着法排序"><span class="toc-number">5.3.</span> <span class="toc-text">着法排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#置换表和主要变例"><span class="toc-number">5.4.</span> <span class="toc-text">置换表和主要变例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#迭代加深"><span class="toc-number">5.5.</span> <span class="toc-text">迭代加深</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pvs"><span class="toc-number">5.6.</span> <span class="toc-text">Pvs</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#未实现的想法"><span class="toc-number">6.</span> <span class="toc-text">未实现的想法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#蒙特卡洛模拟"><span class="toc-number">6.1.</span> <span class="toc-text">蒙特卡洛模拟</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更好的估值参数"><span class="toc-number">6.2.</span> <span class="toc-text">更好的估值参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CNN自动调参"><span class="toc-number">6.3.</span> <span class="toc-text">CNN自动调参</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MTDF期望窗口搜索"><span class="toc-number">6.4.</span> <span class="toc-text">MTDF期望窗口搜索</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自动横跳的更有效解决方案"><span class="toc-number">6.5.</span> <span class="toc-text">自动横跳的更有效解决方案</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Debug"><span class="toc-number">7.</span> <span class="toc-text">Debug</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#心路历程"><span class="toc-number">8.</span> <span class="toc-text">心路历程</span></a></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://pic.downk.cc/item/5e3192e92fb38b8c3ce91b19.jpg)"><div id="post-info"><div id="post-title"><div class="posttitle">国际跳棋AI</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 发表于 2020-02-24<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> 更新于 2020-02-25</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8D%9A%E5%BC%88/">计算机博弈</a></span><div class="post-meta-wordcount"><i class="fa fa-file-word-o post-meta__icon fa-fw" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">5k</span><span class="post-meta__separator">|</span><i class="fa fa-clock-o post-meta__icon fa-fw" aria-hidden="true"></i><span>阅读时长: 15 分钟</span><div class="post-meta-pv-cv"><span class="post-meta__separator">|</span><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>阅读量:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content">
    <div id="aplayer-IATlOPkJ" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="19945727" data-server="netease" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#49b1f5"></div>
<p>大一上学期作业项目，用C语言实现一个有一定棋力的国际跳棋AI。</p>
<p>首先：<s>传  统  艺  能</s></p>
<blockquote><p>：建议雇一批人日夜破坏嘉定电网</p>
<p>：建议连夜盗取某曾姓dl的代码</p>
<p>：大家好，我叫zch。其实我叫什么名字并不重要，你叫我神也可以，叫我渣男也可以，反正你知道我是同济大学2019级新生院最牛B的那个人就可以了。</p>
<footer><strong>知乎</strong><cite><a href="https://www.zhihu.com/question/354470595/answer/926539077" target="_blank" rel="noopener">刚学了2个月C语言的萌新如何写出国际跳棋程序？</a></cite></footer></blockquote>
<p>好了皮完了进入正题：</p>
<h2 id="成绩"><a class="header-anchor" href="#成绩"></a>成绩</h2>
<p>在dl们更新代码的间隙体验了一把榜一，蛮爽的😴。</p>
<p><a href="https://pic.downk.cc/item/5e537b096127cc07136f68f1.png" target="_blank" rel="noopener" data-fancybox="group" data-caption="rank" class="fancybox"><img alt="rank" title="rank" data-src="https://pic.downk.cc/item/5e537b096127cc07136f68f1.png" src="/img/loading4.gif" class="lazyload"></a></p>
<p>最终只有Rank11，比较菜。</p>
<h2 id="游戏规则与平台说明"><a class="header-anchor" href="#游戏规则与平台说明"></a>游戏规则与平台说明</h2>
<p>下面一大大大大大段是俺抄的助教写的说明。</p>
<div class="note info no-icon">
            <h3 id="项目简介"><a class="header-anchor" href="#项目简介"></a>项目简介</h3><p>该项目是个人项目，学生需要<strong>独立</strong>完成。学生需要使用 C 语言实现一个“国际跳棋”走子程序（以下称为大脑程序），使用 stdin 来接收对手落子情况、通过计算后使用 stdout 输出自己的落子（见输入输出格式）。算法不限，但有时间和内存上的限制（见比赛规则）。</p><p>学生需要将大脑程序的源码递交到指定的在线评测平台。平台会对所有同学的大脑程序两两进行机-机“国际跳棋”对抗比赛。比赛获胜方可获得积分。学生在该项目中取得的最终成绩取决于在平台上比赛总积分的名次（见排名和评分规则）。</p><h3 id="对抗规则"><a class="header-anchor" href="#对抗规则"></a>对抗规则</h3><ol><li>每个大脑程序都会与其他学生的大脑程序各进行一场比赛，每场比赛都有多局。</li><li>为了确保公平性，每一场比赛都进行偶数局，对于一方来说，其中一半的局执黑、一半的局执白。</li></ol><h3 id="比赛规则"><a class="header-anchor" href="#比赛规则"></a>比赛规则</h3><p>本规则是标准国际跳棋规则的简化版。</p><ol><li>对局采用 8 * 8 绿白棋棋盘，见“附录-棋盘”</li><li>对局开始时，每方各12颗棋子，摆放在最下或者最上的三行中，每行仅在绿色格子中摆放棋子。见“附录-初始局面”。</li><li>黑子先行，双方轮流操作。每次操作，可以移动自己的一枚棋子到周围的空棋位，移动的方向为向前的2个斜线方向，每次只能移动一格。示例见“附录-棋子移动”</li><li>吃子的规则如下，具体的示例如附录所示：<ol><li>吃掉棋子的移动是沿着对角线跨过被对手的棋子占领的方格直接跳到紧接着的空方格上。吃掉棋子的移动叫做“跳”。这个吃掉棋子的移动完成后，被吃掉（跨过）的棋子要从棋盘上拿掉。见“附录-吃子”</li><li>有吃必吃：如果遇到能吃掉对方棋子的机会，那么必须吃掉对方棋子。</li><li>有多吃多：对弈时如果出现一枚棋子(或多枚棋子)同时可以顺着两条(或多条)路线去吃对方棋子的情况时，吃子方必须选择吃子数量最多的路线行棋，而不能考虑哪条路线对自己有利。</li><li>一次取净：吃多枚棋子时，必须要在跳跃结束后，一次将被吃的棋子顺序或倒序逐个全部从棋盘上取走，不能跳一枚，取一枚。</li><li>不准重跳：当在对局中，如果遇到：一方可按两条(或多条)路线吃对方的棋子时，在吃子的过程中不能两次(也包括多次)吃掉和跳过一枚棋子。</li></ol></li><li>行棋过程中，在己方棋子到达对方侧的底线前，己方棋子只能向前移动；当一颗棋子到达了对方底线之后，这颗棋子可以向任意向的斜线移动，移动步数仍为1步。<strong>注意，此处与标准国际跳棋规则中不同</strong></li><li>吃子不受方向的限制。</li><li>轮到己方走子时，大脑程序需要在2秒时间内给出落子方案。</li><li>每一局游戏最多进行60个回合，<ol><li>如果在60回合之前，有一方棋子都被吃掉，或者所有己棋都无法移动，则对方获胜。</li><li>如果达到60回合，则按棋盘上剩余棋子的局面判断胜负：<ol><li>每个到达对方底线的棋子计3分，其余棋子计1分</li><li>分数高者获胜</li></ol></li></ol></li><li>每一局中，己方不能使用超过 90 秒的总时间（对方走子时不算己方用时）。</li><li>大脑程序任何时刻都不能使用超过 350 MB 的内存。</li><li>在对方走子时，己方的程序会继续保持运行。</li></ol><p>注意：</p><ol><li>若某一方首先超出时间限制或空间限制，或程序异常退出，则判该局这一方负。</li><li>学生递交的代码会在云平台上运行，视平台任务压力不同，助教可能随时调整硬件配置调节压力，因此代码需要能在不同的 CPU 配置下都不超过时间限制。</li><li>大脑程序将绑定在一个 CPU 核心上运行，因此使用多线程不会带来速度提升。</li><li>大脑程序将运行在沙盒中，互相隔离，没有文件读写权限。调用被限制的函数可能会导致异常退出。</li></ol><h3 id="排名和评分规则"><a class="header-anchor" href="#排名和评分规则"></a>排名和评分规则</h3><ol><li><strong>项目截止时间为十六周周日（12月22日）晚23:59，答辩时间为第十七周</strong></li><li>对于每一场比赛，赢得局数较多的一方获得该场比赛胜利，另一方负，否则平。</li><li>胜一场比赛获得 3 积分；平一场比赛获得 1 积分；负一场比赛不获得积分。</li><li>一个同学的总积分是其大脑程序与其他同学最新大脑程序比赛的积分总和。</li><li>学生可以递交多次大脑程序，每次递交都会重置总积分，即总积分会按照最新一次递交的程序累计。</li><li>为了避免资源被滥用，每个学生有递交频率上限，包括每两次递交代码的最短间隔限制，和今日代码已消耗时间的限制。这些频率上限会随时调整，调整时会在 QQ 群公告；学生也可以在[在线评测平台][portal]的递交界面里看到当前递交频率限制。</li><li>学生递交的代码不得超出 1 MB 大小。一般情况下代码不会长到超出这个限制。</li><li>学生在该项目中的成绩取决于以下因素：<ul><li>主要因素：项目截止时的总积分排名（排名越高则成绩越高，反之亦然）</li><li>次要因素：答辩情况</li></ul></li><li>学生需确保最终代码的美观、可读，包括拥有一致的缩进、一致的变量命名、良好的代码组织、尽可能避免重复代码等，否则将视情况至多扣除总分的 30% 分数。</li><li>学生任何时刻不得抄袭网上现有代码或其他学生代码（包括非最终版代码），一经发现并核实，本门课将直接以作弊处理。</li></ol><h3 id="输入输出格式"><a class="header-anchor" href="#输入输出格式"></a>输入输出格式</h3><p>学生的国际跳棋大脑程序需要从标准输入 (stdin) 接收指令，并相应地做出响应，将响应输出到标准输出 (stdout)。每一个指令都独占一行。大脑程序的响应也需要独占一行（即跟随一个换行符 <code>\n</code>）。以下是大脑程序需要支持的指令：</p><h4 id="START-FIELD"><a class="header-anchor" href="#START-FIELD"></a>START [FIELD]</h4><p>在开始对局前，大脑程序一定会收到该指令，指令表明了己方有关的信息。<code>FIELD</code> 代表该己方大脑执子颜色，<code>FIELD</code> 为 <code>1</code> 时代表己方执黑棋，<code>FIELD</code> 为 <code>2</code> 时代表己方执白棋。</p><p>收到该指令后，大脑程序需要在1秒响应 <code>OK</code>，否则判负。</p><h5 id="示例"><a class="header-anchor" href="#示例"></a>示例</h5><p>平台发送指令：</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">START 1</span><br></pre></td></tr></table></figure></div><p>大脑程序回复：</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OK</span><br></pre></td></tr></table></figure></div><h4 id="PLACE-N-X1-Y1-X2-Y2-…-XN-YN"><a class="header-anchor" href="#PLACE-N-X1-Y1-X2-Y2-…-XN-YN"></a>PLACE N [X1,Y1] [X2,Y2] … [XN,YN]</h4><p>该指令代表一次对手的行棋，<code>N</code>表示本次行棋中棋子共经过的格子数，<code>X1</code>、<code>Y1</code> 是对手要移动棋子的行列坐标（坐标从 0 开始），<code>X2</code> 、<code>Y2</code>是棋子要移动到的行列坐标，以此类推。</p><p>大脑程序不需要回复该指令。</p><p>对于一次棋子的移动，<code>X</code>和 <code>Y</code>用<code>,</code>（英文逗号）分隔；如果对手连续移动棋子，则每次落子之间用空格隔开。</p><h5 id="示例-v2"><a class="header-anchor" href="#示例-v2"></a>示例</h5><p>平台发送指令：</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PLACE 3 1,1 3,3 1,5</span><br></pre></td></tr></table></figure></div><p>大脑程序不需要回复。</p><h4 id="TURN"><a class="header-anchor" href="#TURN"></a>TURN</h4><p>该指令代表轮到己方操作。大脑程序收到该指令后，经过计算得出己方走子，并将要移动棋子经过的格子数，每个格子的行坐标、列坐标以逗号分割作为响应内容，如果连续移动棋子，则每次移动的指令间用空格隔开。大脑程序需要在指定时限内做出走子响应，否则判负。</p><p>该指令可能直接出现在 <code>START</code> 指令之后，即己方执黑棋开局；也可能出现在一次 <code>PLACE</code> 指令之后，即对手落子完毕轮到己方落子。注意，若对手落子完毕后游戏直接结束，则 <code>PLACE</code> 指令之后不会跟随有 <code>TURN</code> 指令。</p><h5 id="示例-v3"><a class="header-anchor" href="#示例-v3"></a>示例</h5><p>平台发送指令：</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TURN</span><br></pre></td></tr></table></figure></div><p>大脑程序回复：</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3 7,7 5,5 3,3</span><br></pre></td></tr></table></figure></div><h4 id="END-FIELD"><a class="header-anchor" href="#END-FIELD"></a>END [FIELD]</h4><p>代表该局比赛结束，其中 <code>FIELD</code> 代表获胜方，<code>FIELD</code> 为 0 时是平局，<code>FIELD</code> 为 <code>1</code> 时是己方获胜，为 <code>2</code> 时是对方获胜。在收到该指令后，大脑程序不需要做任何响应，可以自行决定是否要退出程序（在评测时，无论大脑程序是否主动退出，它最后都会被关闭）。该指令可能在任何时刻出现，例如出现在 <code>BEGIN</code> 前的话，可能是对手程序崩溃导致的这场比赛直接结束。</p><p>特别注意：在大脑程序启动后、没收到该指令前，大脑程序的自行提起退出将会导致被判负。</p><h5 id="示例-v4"><a class="header-anchor" href="#示例-v4"></a>示例</h5><p>平台发送指令：</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">END 1</span><br></pre></td></tr></table></figure></div><p>大脑程序不需要回复。</p><h3 id="调试指令"><a class="header-anchor" href="#调试指令"></a>调试指令</h3><p>为了方便调试，大脑程序可以在任何时刻输出 <code>DEBUG [MESSAGE]</code>（需要独占一行，且不能超出一行）。该内容将会被记录到日志，而不会被平台处理。学生可以在平台上下载到完整的日志从而方便调试 bug。大脑程序可以调试输出任意多次，但单条 <code>MESSAGE</code> 不能大于 16 KB（超出部分会被截断）且所有 <code>MESSAGE</code> 累计不能超过 32 KB（超出部分会被忽略），而不会记录到日志。</p><p>注意：该输出不能替代其他任何指令的响应。例如收到 <code>TURN</code> 指令后，需要响应一个坐标，那么输出 <code>DEBUG [MESSAGE]</code> 后，大脑程序仍然需要继续输出坐标。</p><h4 id="示例-v5"><a class="header-anchor" href="#示例-v5"></a>示例</h4><p>大脑程序输出：</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DEBUG Hello World!</span><br></pre></td></tr></table></figure></div><h3 id="直接终止判负的情况"><a class="header-anchor" href="#直接终止判负的情况"></a>直接终止判负的情况</h3><p>以下是一部分可能导致比赛中途终止直接结束并判负的情况。</p><h4 id="在不允许响应的情况下响应"><a class="header-anchor" href="#在不允许响应的情况下响应"></a>在不允许响应的情况下响应</h4><p>例如，己方刚刚响应完 <code>TURN</code> 指令，需要等待下一个 <code>TURN</code> 之后再走子。若此时己方继续输出内容（调试输出除外），则直接判负。</p><h4 id="响应内容格式不正确或无效走子"><a class="header-anchor" href="#响应内容格式不正确或无效走子"></a>响应内容格式不正确或无效走子</h4><p>例如，对于 <code>TURN</code> 指令，己方需要响应一对空格分割的坐标和要移动的方向。若响应的内容格式不正确（调试输出除外），则直接判负。若响应的坐标在棋盘以外，或指定的位置处没有我方棋子，或者要移动后的新的位置不是空棋位，则也判负。</p><h4 id="超出时间限制或空间限制"><a class="header-anchor" href="#超出时间限制或空间限制"></a>超出时间限制或空间限制</h4><p>时间限制包括单个指令的时间限制和总时间限制。对于 <code>START</code> 指令，需要在 52秒内响应；对于 <code>TURN</code> 指令，需要在指定的单步走子时间内响应，见比赛规则。总时间限制同样见比赛规则，它的计算从 <code>START</code> 开始，到 <code>END</code> 结束，期间对方落子时不计时间。</p><h4 id="程序自身崩溃"><a class="header-anchor" href="#程序自身崩溃"></a>程序自身崩溃</h4><p>由于各种原因（如访问无效内存地址）程序崩溃了，则该局直接判负。</p><h3 id="编程注意事项"><a class="header-anchor" href="#编程注意事项"></a>编程注意事项</h3><ol><li><code>scanf</code> 函数在没有数据可供读取时会阻塞，因此请勿在不该读取指令的时候读取指令。例如轮到你的 AI 输出了，却执行了一句 <code>scanf</code>，那么你的程序就会无限等待下去直到超时。</li><li>大多数情况下，<code>printf</code> 的输出会被缓存而不会立刻输出，这会导致超时。可以使用 <a href="http://www.cplusplus.com/reference/cstdio/fflush/" target="_blank" rel="noopener">fflush</a> 函数解决这个问题：请在 <code>printf</code> 后紧跟语句 <code>fflush(stdout)</code> 来刷新缓冲区。</li><li>若想利用对方走子的时间进行计算，你可能需要使用多线程技术。由于平台环境是 Windows，因此建议使用 Windows 平台下相关 API 以免出现不兼容情况。</li><li>特别提醒：若要使用高级算法，请确保能在答辩时应对关于该算法的提问，否则将被视为抄袭。</li></ol><h3 id="在线评测平台操作说明"><a class="header-anchor" href="#在线评测平台操作说明"></a>在线评测平台操作说明</h3><ol><li>在电脑上使用较新版本 Chrome 或 Firefox 浏览器打开平台地址<a href="http://202.120.167.41:99/" target="_blank" rel="noopener">http://202.120.167.41:99</a> 。</li><li>点击导航栏右上角 “Sign In” 按钮登录，用户名和密码都是你的学号（若无法登录，请联系群里的助教）。</li><li>若你是第一次登录，会要求你修改到一个新密码，以免账号被别人冒用。另外还会要求你输入一个昵称。这个昵称会显示在首页的记分牌上，所有人都能看得见，且以后也可以随意修改。</li><li>导航栏上点击 Scoreboard 可以看到记分牌，即当前的总积分排名。记分牌十分钟更新一次。</li><li>导航栏上点击 Submission 后，右侧菜单中可以切换界面到你自己的递交记录（My Submissions）、别人的递交记录（All Submissions）或递交新代码（Submit New Brain）的页面。</li><li>递交新代码时，请将你的代码合并到一个单一文件中进行递交，不支持递交多个文件。你还可以选择不同的编译器。</li></ol><h3 id="评测环境"><a class="header-anchor" href="#评测环境"></a>评测环境</h3><p>计划于2019-11-17日前完成并上线，同时发布样例代码。</p>
          </div>
<h3 id="参考资料"><a class="header-anchor" href="#参考资料"></a>参考资料</h3>
<ol>
<li><a href="http://games.sports.cn/topicmatch/jc/index.html" target="_blank" rel="noopener">国际跳棋比赛规则</a></li>
<li><a href="http://www.4399.com/flash/116133_2.htm" target="_blank" rel="noopener">国际跳棋试玩</a></li>
<li><a href="https://www.xqbase.com/computer.htm" target="_blank" rel="noopener">计算机博弈</a></li>
</ol>
<h2 id="思路"><a class="header-anchor" href="#思路"></a>思路</h2>
<ol>
<li>实现一个能下棋的AI，首先得按规则下棋。</li>
<li>按规则下棋这件事要怎么在程序中去模拟~~(款爷腔)~~？</li>
<li>通过什么东西能让它好好下棋棋。</li>
</ol>
<h2 id="储存与着法"><a class="header-anchor" href="#储存与着法"></a>储存与着法</h2>
<p>首先要实现能下棋，那就要解决这些问题：</p>
<div class="note info no-icon">
            <ol><li>如何表示棋盘？</li><li>如何枚举合法的走棋？</li><li>如何更新棋盘？</li><li>如何走子？</li><li>如何连吃？</li></ol>
          </div>
<p>一旦解决了表示和枚举的问题，就会发现走子只是一个简单的更新棋盘，吃子则是一个稍微复杂一点的BFS模型。因此关键是解决前面的问题。</p>
<p>针对这个问题，在学习了<code>xqbase</code>中的数据结构和着法相关的做法后，我大概设计了两种方案，都写了一下，但是后期考虑到回溯和置换表的具体实现，最后选择了方案二。</p>
<p>方案一：</p>
<div class="note danger no-icon">
            <h3 id="0x88判别数组"><a class="header-anchor" href="#0x88判别数组"></a>0x88判别数组</h3><p>0x88判别是对naive版本的二维数组表示棋盘，数组取值表示棋子类型的改进版本，可以用一个位运算代替所有繁琐的关于棋子是否在棋盘内的判断，它的工作原理是对棋盘进行特定的间隔编号。除了在枚举的时候可以简化边界判断，其他的内容就比较常规了。这种做法在更新棋盘、枚举等操作上，花费的时间还是挺多的。</p><h4 id="编号规则"><a class="header-anchor" href="#编号规则"></a>编号规则</h4><p>设行号为<code>row</code>，列号为<code>col</code>的棋盘格子在数组中的索引为<code>index</code></p><p>若使<code>row</code>和<code>col</code>取值为0到7，且<code>index=(row&lt;&lt;4)|col</code></p><p>则易得：<code>棋子在棋盘中</code>等价于<code>!(index&amp;0x88)</code></p><h4 id="证明"><a class="header-anchor" href="#证明"></a>证明</h4><p>由<code>index</code>的定义易得合法的<code>index</code>从低到高<code>第4位</code>、<code>第8位</code>、<code>符号位</code>这三个位上的二进制恒为0。</p><p>现在对格子进行移动，设移动前的格子到移动后的格子的直观移动距离为<code>delta</code>格，则合法的<code>delta</code>取值为1到8。那么总共有两种情况：</p><ol><li>左右移动</li></ol><p>由规则，<code>index</code>变为<code>index±delta</code>，如果超出棋盘，后三位以外的二进制位就会参与运算，但是无论是进位或者借位都会使<code>第4位</code>成为1，因此可以借助二进制00001000判断左右移动情况。</p><ol start="2"><li>上下移动</li></ol><p>由规则，<code>index</code>变为<code>index±(delta&lt;&lt;4)</code>，如果超出棋盘，结果会<code>符号位</code>或者<code>第8位</code>为1，</p><p>因此可以借助二进制10000000判断上下移动情况</p><p>综上所述，只需要位与二进制10001000</p><p>即0x88即可做出综合判断</p>
          </div>
<p>方案二：</p>
<div class="note success no-icon">
            <h3 id="位棋盘"><a class="header-anchor" href="#位棋盘"></a>位棋盘</h3><p>位棋盘。一听名字就很强。这种做法是把每一种类型的棋子占据的总棋盘看作整数，整数的每一位对应着这一位置上改类型棋子的占有情况。位棋盘可以大大减小整个模拟过程中的空间开销，在本规则下，每种特定的棋的局面用黑、白、王三个64位整数就可以完全表示出来。但是这种做法会让本来很显然的挪子变得比较复杂，我们来具体分析：</p><p>棋子有两种移动，一种是斜1格，一种是斜2格。如果能够提取出整个棋盘中我们想移动的确定的子，那么移动就会变成很简单的位移运算。但是这里有一点问题，有些处于边界的棋子不应该移动，否则位移后的棋盘并不是合法的，所以需要在移动之前考虑到这些棋子。由于棋盘的边界、死角和对应的移动我们都是可以提前推测的，所以可以预处理出针对某移动不合法的棋子，在使用的时候趁早排除。</p><h3 id="强化版本"><a class="header-anchor" href="#强化版本"></a>强化版本</h3><p>“还能不能再给力点呢？”</p><p>当然可以了。</p><p>本项目的跳棋非常特殊，整个棋盘只有一般的位置是有效的，所以俺脑补了一个把64位棋盘搞成32位的变化。把棋盘中的没用格子全部去掉，然后左对齐，按照行数整除2的商分类，同商等齐，不同商依次突出1格，然后发现经过一点小小的运算，棋子的移动还是可以用非常优雅的位运算表示的。于是我们非常完美的把<code>unsigned long long</code>运算简化成了32位<code>int</code>运算。</p>
          </div>
<h2 id="搜索"><a class="header-anchor" href="#搜索"></a>搜索</h2>
<p>我们已经摸清楚了怎样让程序按规则走棋，现在的任务是让他真正的会下棋。</p>
<p>怎样让他会下棋呢？</p>
<p>让他把能走的所有情况都走一遍，然后挑出最好的一步，称之为搜索。</p>
<p>没错，就是这么粗暴。</p>
<p>因为给出了时间和空间限制，所以我们的搜索肯定是不完全的，或许只能搜索完几步后的结果。我们接下来的所有工作，都是围绕着怎样让他的搜索结果尽量准确进行。</p>
<h3 id="估值"><a class="header-anchor" href="#估值"></a>估值</h3>
<h3 id="AlphaBeta剪枝"><a class="header-anchor" href="#AlphaBeta剪枝"></a>AlphaBeta剪枝</h3>
<h3 id="着法排序"><a class="header-anchor" href="#着法排序"></a>着法排序</h3>
<h3 id="置换表和主要变例"><a class="header-anchor" href="#置换表和主要变例"></a>置换表和主要变例</h3>
<h3 id="迭代加深"><a class="header-anchor" href="#迭代加深"></a>迭代加深</h3>
<h3 id="Pvs"><a class="header-anchor" href="#Pvs"></a>Pvs</h3>
<h2 id="未实现的想法"><a class="header-anchor" href="#未实现的想法"></a>未实现的想法</h2>
<h3 id="蒙特卡洛模拟"><a class="header-anchor" href="#蒙特卡洛模拟"></a>蒙特卡洛模拟</h3>
<h3 id="更好的估值参数"><a class="header-anchor" href="#更好的估值参数"></a>更好的估值参数</h3>
<h3 id="CNN自动调参"><a class="header-anchor" href="#CNN自动调参"></a>CNN自动调参</h3>
<h3 id="MTDF期望窗口搜索"><a class="header-anchor" href="#MTDF期望窗口搜索"></a>MTDF期望窗口搜索</h3>
<h3 id="自动横跳的更有效解决方案"><a class="header-anchor" href="#自动横跳的更有效解决方案"></a>自动横跳的更有效解决方案</h3>
<h2 id="Debug"><a class="header-anchor" href="#Debug"></a>Debug</h2>
<h2 id="心路历程"><a class="header-anchor" href="#心路历程"></a>心路历程</h2>
</div></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/game/">game    </a><a class="post-meta__tags" href="/tags/algorithm/">algorithm    </a><a class="post-meta__tags" href="/tags/c-c/">c/c++    </a></div><div class="post_share"><div class="social-share" data-image="https://pic.downk.cc/item/5e3192e92fb38b8c3ce91b19.jpg" data-sites="qq,wechat,weibo,facebook,twitter"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 请作者喝奶茶<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg" alt="Wechat"><div class="post-qr-code__desc">Wechat</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg" alt="Alipay"><div class="post-qr-code__desc">Alipay</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="next-post pull-full"><a href="/vscodecmdershengchanlipeizhi/"><img class="next_cover lazyload" data-src="https://pic.downk.cc/item/5e3ea9df2fb38b8c3c2dccfa.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>用Vscode+Cmder写代码</span></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: '4ad77e39e9c02d83634d',
  clientSecret: '7c89673cbbe890335e5e1b97afdeb90ee2c854b6',
  repo: 'li-letian.github.io',
  owner: 'li-letian',
  admin: 'li-letian',
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN , en',
  updateCountCallback: commentCount
})
gitalk.render('gitalk-container')

function commentCount(n){
  document.getElementsByClassName('gitalk-comment-count')[0].innerHTML= n
}</script></div></div></main><footer id="footer" style="background-image: url(https://pic.downk.cc/item/5e3192e92fb38b8c3ce91b19.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By Letian</div><div class="footer_custom_text">康完辣(`･ω･´)别走啊再康康呗</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/sakura.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="true" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/canvas-nest.js"></script><script src="https://cdn.jsdelivr.net/npm/activate-power-mode/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true; 
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/ClickShowText.js"></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>